(()=>{var e={};e.id=1302,e.ids=[1302],e.modules={3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},44870:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},69117:(e,r,t)=>{"use strict";t.r(r),t.d(r,{patchFetch:()=>g,routeModule:()=>u,serverHooks:()=>m,workAsyncStorage:()=>c,workUnitAsyncStorage:()=>l});var s={};t.r(s),t.d(s,{GET:()=>p});var o=t(96559),a=t(48088),i=t(37719),n=t(32190);let d=new(t(96330)).PrismaClient;async function p(){try{let e=(await d.product.findMany({include:{category:!0,store:{include:{owner:{select:{id:!0,name:!0,email:!0,image:!0}}}}},orderBy:{createdAt:"desc"}})).map(e=>({id:e.id,name:e.name,description:e.description,price:e.price,stock:"bigint"==typeof e.stock?Number(e.stock):e.stock,images:e.images,rating:e.rating,createdAt:e.createdAt,updatedAt:e.updatedAt,category:e.category?{id:e.category.id,name:e.category.name,description:e.category.description,image:e.category.image}:null,store:e.store?{id:e.store.id,name:e.store.name,logo:e.store.logo,rating:e.store.rating,seller:e.store.owner?{id:e.store.owner.id,name:e.store.owner.name,email:e.store.owner.email,image:e.store.owner.image}:null}:null})),r=JSON.parse(JSON.stringify(e,(e,r)=>"bigint"==typeof r?Number(r):r));return n.NextResponse.json({products:r})}catch(e){return console.error("[ADMIN_PRODUCTS_GET]",e),n.NextResponse.json({error:"Erreur lors de la r\xe9cup\xe9ration des produits"},{status:500})}}let u=new o.AppRouteRouteModule({definition:{kind:a.RouteKind.APP_ROUTE,page:"/api/all-products-admin/route",pathname:"/api/all-products-admin",filename:"route",bundlePath:"app/api/all-products-admin/route"},resolvedPagePath:"C:\\Users\\Stoufa\\Desktop\\PFE_github\\app\\api\\all-products-admin\\route.js",nextConfigOutput:"",userland:s}),{workAsyncStorage:c,workUnitAsyncStorage:l,serverHooks:m}=u;function g(){return(0,i.patchFetch)({workAsyncStorage:c,workUnitAsyncStorage:l})}},78335:()=>{},96330:e=>{"use strict";e.exports=require("@prisma/client")},96487:()=>{}};var r=require("../../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),s=r.X(0,[7719,580],()=>t(69117));module.exports=s})();