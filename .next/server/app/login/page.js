(()=>{var e={};e.id=4520,e.ids=[4520],e.modules={3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},14901:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>s});let s=(0,t(12907).registerClientReference)(function(){throw Error("Attempted to call the default export of \"C:\\\\Users\\\\Stoufa\\\\Desktop\\\\PFE_github\\\\app\\\\login\\\\page.jsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"C:\\Users\\Stoufa\\Desktop\\PFE_github\\app\\login\\page.jsx","default")},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},24571:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>h});var s=t(60687),o=t(43210),n=t(82136),a=t(16189),i=t(37590),l=t(85814),d=t.n(l),c=t(4355),u=t(28641);function h(){(0,a.useRouter)();let[e,r]=(0,o.useState)(""),[t,l]=(0,o.useState)(""),[h,m]=(0,o.useState)(!1),p=async r=>{r.preventDefault(),m(!0);try{let r=await (0,n.signIn)("credentials",{email:e,password:t,redirect:!0,callbackUrl:"/api/auth/redirect-by-role"});r?.error&&i.Ay.error(r.error)}catch(e){console.error("Erreur de connexion:",e),i.Ay.error("Une erreur est survenue lors de la connexion")}finally{m(!1)}};return(0,s.jsx)("div",{className:"min-h-screen flex flex-col items-center justify-center bg-gradient-to-br from-orange-50 to-orange-100 dark:from-gray-900 dark:to-gray-800 p-4",children:(0,s.jsxs)("div",{className:"w-full max-w-md",children:[(0,s.jsxs)("div",{className:"mb-8 text-center",children:[(0,s.jsx)(u.g,{className:"mx-auto mb-4"}),(0,s.jsx)("h2",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:"Bienvenue"}),(0,s.jsx)("p",{className:"mt-2 text-gray-600 dark:text-gray-400",children:"Connectez-vous \xe0 votre compte"})]}),(0,s.jsxs)("div",{className:"bg-white dark:bg-gray-800 p-8 rounded-xl shadow-lg",children:[(0,s.jsxs)("form",{onSubmit:p,className:"space-y-6",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Email"}),(0,s.jsx)("input",{id:"email",type:"email",required:!0,className:"mt-1 block w-full px-3 py-2 bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-orange-500 focus:border-orange-500",value:e,onChange:e=>r(e.target.value)})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Mot de passe"}),(0,s.jsx)("input",{id:"password",type:"password",required:!0,className:"mt-1 block w-full px-3 py-2 bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-orange-500 focus:border-orange-500",value:t,onChange:e=>l(e.target.value)}),(0,s.jsx)("div",{className:"mt-1 text-right",children:(0,s.jsx)(d(),{href:"/forgot-password",className:"text-sm font-medium text-orange-600 hover:text-orange-500",children:"Mot de passe oubli\xe9 ?"})})]}),(0,s.jsxs)("div",{className:"flex flex-col space-y-4",children:[(0,s.jsx)("button",{type:"submit",disabled:h,className:"w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-orange-600 hover:bg-orange-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-orange-500 disabled:opacity-50 disabled:cursor-not-allowed",children:h?"Connexion...":"Se connecter"}),(0,s.jsxs)("button",{type:"button",onClick:()=>{(0,n.signIn)("google",{callbackUrl:"/api/auth/redirect-by-role"})},className:"w-full flex items-center justify-center gap-2 py-2 px-4 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm text-sm font-medium text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600",children:[(0,s.jsx)(c.F4b,{className:"w-5 h-5"}),"Se connecter avec Google"]})]})]}),(0,s.jsxs)("div",{className:"mt-6 text-center",children:[(0,s.jsxs)("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Vous n'avez pas de compte ?"," ",(0,s.jsx)(d(),{href:"/register/client",className:"font-medium text-orange-600 hover:text-orange-500",children:"Cr\xe9er un compte client"})]}),(0,s.jsxs)("p",{className:"mt-2 text-sm text-gray-600 dark:text-gray-400",children:["Vous \xeates un vendeur ?"," ",(0,s.jsx)(d(),{href:"/register/seller",className:"font-medium text-orange-600 hover:text-orange-500",children:"Cr\xe9er un compte vendeur"})]})]})]})]})})}},27577:(e,r,t)=>{Promise.resolve().then(t.bind(t,93219))},28641:(e,r,t)=>{"use strict";t.d(r,{g:()=>i});var s=t(60687),o=t(10218),n=t(8093),a=t(43210);let i=({className:e="",width:r=150,height:t=50})=>{let{theme:i,systemTheme:l}=(0,o.D)(),[d,c]=(0,a.useState)(!1);return((0,a.useEffect)(()=>{c(!0)},[]),d)?(0,s.jsx)(n.default,{src:"dark"===("system"===i?l:i)?"/logo-dark.svg":"/logo-light.svg",alt:"Logo",width:r,height:t,className:e,priority:!0}):(0,s.jsx)(n.default,{src:"/logo-light.svg",alt:"Logo",width:r,height:t,className:e,priority:!0})}},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},32648:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>s});let s=(0,t(12907).registerClientReference)(function(){throw Error("Attempted to call the default export of \"C:\\\\Users\\\\Stoufa\\\\Desktop\\\\PFE_github\\\\app\\\\layout.js\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"C:\\Users\\Stoufa\\Desktop\\PFE_github\\app\\layout.js","default")},33873:e=>{"use strict";e.exports=require("path")},38528:(e,r,t)=>{"use strict";t.d(r,{A:()=>d,O:()=>c});var s=t(60687),o=t(43210),n=t(16189),a=t(82136),i=t(37590);let l=(0,o.createContext)({user:null,store:null,loading:!0,login:async()=>{},logout:()=>{},setUser:()=>{}}),d=()=>{let e=(0,o.useContext)(l);if(!e)throw Error("useAuth must be used within an AuthProvider");return e};function c({children:e}){let r=(0,n.useRouter)(),[t,d]=(0,o.useState)(null),[c,u]=(0,o.useState)(null),[h,m]=(0,o.useState)(!0),p=async(e,t)=>{try{let s=await (0,a.signIn)("credentials",{email:e,password:t,redirect:!1});if(s?.error)throw Error(s.error);let o=await fetch("/api/auth/session");if(o.ok){let e=await o.json();if(e?.user){switch(d(e.user),u(e.user.store),i.Ay.success("Connexion r\xe9ussie"),e.user.role){case"ADMIN":r.push("/dashboard");break;case"MANAGER":r.push("/manager/dashboard");break;case"SELLER":r.push("/seller/dashboard");break;default:r.push("/")}r.refresh();return}}i.Ay.success("Connexion r\xe9ussie"),r.push("/"),r.refresh()}catch(e){throw console.error("Login error:",e),i.Ay.error(e.message),e}},g=async()=>{try{await (0,a.signOut)({redirect:!1}),d(null),u(null),r.push("/"),r.refresh(),i.Ay.success("D\xe9connexion r\xe9ussie")}catch(e){console.error("Logout error:",e),i.Ay.error("Erreur lors de la d\xe9connexion")}};return(0,s.jsx)(l.Provider,{value:{user:t,store:c,loading:h,login:p,logout:g,setUser:d},children:e})}},41001:(e,r,t)=>{Promise.resolve().then(t.t.bind(t,86346,23)),Promise.resolve().then(t.t.bind(t,27924,23)),Promise.resolve().then(t.t.bind(t,35656,23)),Promise.resolve().then(t.t.bind(t,40099,23)),Promise.resolve().then(t.t.bind(t,38243,23)),Promise.resolve().then(t.t.bind(t,28827,23)),Promise.resolve().then(t.t.bind(t,62763,23)),Promise.resolve().then(t.t.bind(t,97173,23))},46055:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>o});var s=t(31658);let o=async e=>[{type:"image/x-icon",sizes:"16x16",url:(0,s.fillMetadataSegment)(".",await e.params,"favicon.ico")+""}]},56953:(e,r,t)=>{Promise.resolve().then(t.bind(t,32648))},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},75401:(e,r,t)=>{Promise.resolve().then(t.bind(t,24571))},75849:(e,r,t)=>{Promise.resolve().then(t.t.bind(t,16444,23)),Promise.resolve().then(t.t.bind(t,16042,23)),Promise.resolve().then(t.t.bind(t,88170,23)),Promise.resolve().then(t.t.bind(t,49477,23)),Promise.resolve().then(t.t.bind(t,29345,23)),Promise.resolve().then(t.t.bind(t,12089,23)),Promise.resolve().then(t.t.bind(t,46577,23)),Promise.resolve().then(t.t.bind(t,31307,23))},76080:()=>{},79551:e=>{"use strict";e.exports=require("url")},85129:(e,r,t)=>{Promise.resolve().then(t.bind(t,14901))},93219:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>c});var s=t(60687);t(76080);var o=t(72677),n=t.n(o);t(43210);var a=t(10218);function i({children:e,...r}){return(0,s.jsx)(a.N,{...r,children:e})}var l=t(38528),d=t(37590);function c({children:e}){return(0,s.jsxs)("html",{lang:"fr",suppressHydrationWarning:!0,children:[(0,s.jsxs)("head",{children:[(0,s.jsx)("title",{children:"Penventory - Gestion de stock"}),(0,s.jsx)("meta",{name:"description",content:"Application de gestion de stock"})]}),(0,s.jsx)("body",{className:n().className,children:(0,s.jsx)(i,{attribute:"class",defaultTheme:"system",enableSystem:!0,disableTransitionOnChange:!0,children:(0,s.jsxs)(l.O,{children:[e,(0,s.jsx)(d.l$,{position:"top-right",toastOptions:{duration:3e3,style:{background:"#333",color:"#fff"},success:{style:{background:"green",color:"#fff"},iconTheme:{primary:"#fff",secondary:"green"}},error:{style:{background:"red",color:"#fff"},iconTheme:{primary:"#fff",secondary:"red"}}}})]})})})]})}},93407:(e,r,t)=>{"use strict";t.r(r),t.d(r,{GlobalError:()=>a.a,__next_app__:()=>u,pages:()=>c,routeModule:()=>h,tree:()=>d});var s=t(65239),o=t(48088),n=t(88170),a=t.n(n),i=t(30893),l={};for(let e in i)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>i[e]);t.d(r,l);let d={children:["",{children:["login",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,14901)),"C:\\Users\\Stoufa\\Desktop\\PFE_github\\app\\login\\page.jsx"]}]},{metadata:{icon:[async e=>(await Promise.resolve().then(t.bind(t,46055))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(t.bind(t,32648)),"C:\\Users\\Stoufa\\Desktop\\PFE_github\\app\\layout.js"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,57398,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(t.t.bind(t,89999,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(t.t.bind(t,65284,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(t.bind(t,46055))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]}.children,c=["C:\\Users\\Stoufa\\Desktop\\PFE_github\\app\\login\\page.jsx"],u={require:t,loadChunk:()=>Promise.resolve()},h=new s.AppPageRouteModule({definition:{kind:o.RouteKind.APP_PAGE,page:"/login/page",pathname:"/login",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})}};var r=require("../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),s=r.X(0,[7719,7006,1658,474,5814,4355],()=>t(93407));module.exports=s})();